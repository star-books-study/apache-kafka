# Chapter 5. 카프카 실전 프로젝트
## 5.1 웹 페이지 이벤트 적재 파이프라인 생성
<img width="360" height="203" alt="image" src="https://github.com/user-attachments/assets/76be6856-43b9-460a-bb08-9e642c0b5073" />
- 이벤트 수집은 서비스에 영향을 미치지 않아야 한다.
- 여기서는 웹 페이지에서 생성되는 이벤트들을 분석하기 위해 HDFS와 엘라스틱서치에 적재하는 파이프라인을 만드는 프로젝트를 진행한다.


### 5.1.1 요구사항
- 이름을 입력하고 좋아하는 색상 고르면 유저 에이전트 정보를 카프카 토픽으로 전달하고 하둡과 엘라스틱서치에 적재
- `하둡`은 대용량 데이터를 분석 처리 / `HDFS`는 대용량 파일을 하둡에 안정적으로 저장할 수 있게 하는 파일 시스템

### 5.1.2 정책 및 기능 정의
#### 적재 정책
- 적재 파이프라인을 만들 때 가장 처음 결정해야 하는 게 적재 정책
- 파이프라인의 운영 난이도는 정책에 따라 달라진다.
- 0.11.0.0 이후 버전부터는 멱등성 프로듀서를 통해 **정확히 한번 전달**을 지원한다.
  
- 전달 : 프로듀서부터 브로커까지 전달되는 것
- 적재 : 프로듀서부터 컨슈머를 넘어 최종적으로 하둡이나 엘라스틱서치까지 데이터가 저장되는 것
- 컨슈머의 커밋 시점과 데이터 적재가 동일 트랜잭션에서 처리되어야 정확히 한 번 적재될 수 있긴 함
  - HDFS 적재, S3 적재 컨슈머 애플리케이션에서는 컨슈머의 커밋과 저장이 동일 트랜잭션으로 처리하는 것이 불가능하다
